# 테이블 조인을 통한 깊이있는 데이터 분석

*MySQL 비밀번호 : database*

## 📌 1. 테이블 간의 연결고리, Foreign Key

- `Foreign Key (외래키)` : 다른 테이블의 특정 row를 식별할 수 있게 해주는 컬럼
- ex) 상품의 정보들이 들어있는 item 테이블, 상품의 재고 정보들이 들어있는 stock 테이블
    - item의 아이디 정보를 통해  서로 연결된다 (item 테이블의 id가 외래키)
    - 참조하는 테이블인 stock이 자식테이블
    - 참조 당하는 테이블인 item 테이블이 부모테이블
        
        ![Screenshot 2021-10-10 at 18.14.48.png](%E1%84%90%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%87%E1%85%B3%E1%86%AF%20%E1%84%8C%E1%85%A9%E1%84%8B%E1%85%B5%E1%86%AB%E1%84%8B%E1%85%B3%E1%86%AF%20%E1%84%90%E1%85%A9%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%80%E1%85%B5%E1%87%81%E1%84%8B%E1%85%B5%E1%84%8B%E1%85%B5%E1%86%BB%E1%84%82%E1%85%B3%E1%86%AB%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5%E1%86%A8%203c3a233344474981b3578a06ae1114c6/Screenshot_2021-10-10_at_18.14.48.png)
        
- **Foreign Key 설정하기**
    - SQL 하단의 Foreign Key 탭 클릭
    - Foreign Key 이름 지정 후 참조 대상 테이블 선택
    - 우측에서 Foreign Key가 될 컬럼 선택
    - 하단의 apply 버튼 클릭

## 📌 2.  다른 종류의 테이블 조인하기

- `join` : 서로 다른 테이블 합치기

```sql
SELECT
	item.id,
	item.name,
	stock.item_id,
	stock.inventory_count
FROM item LEFT OUTER JOIN stock
ON item.id = stock.item_id;
```

- `LEFT OUTER JOIN` : 왼쪽에 쓴 테이블을 기준으로 join
- `RIGHT OUTER JOIN` : 오른쪽에 쓴 테이블을 기준으로 join
- join 했을 때 기준 테이블에는 있고 다른 테이블에 없는 값에는 자동으로 null값이 들어감

### 📝 ***join할 때 테이블에 alias 붙이기***

- 테이블에 alias를 사용한 경우 테이블 이름이 등장하는 다른 문장에도 모두 alias를 사용해주어야 한다

```sql
SELECT
	i.id,
	i.name,
	s.item_id,
	s.inventory_count
FROM item AS i LEFT OUTER JOIN stock AS s
-- FROM item i LEFT OUTER JOIN stock s (AS를 쓰지 않아도 기능은 동일)
ON i.id = s.item_id;
```

## 📌 참고. 컬럼의 alias와 테이블의 alias

- alias는 컬럼이름과 테이블 이름에 사용할 수 있다. 하지만 두 종류의 alias는 약간의 용도 차이가 있다
    
    컬럼의 alias : 각 컬럼 이름이 실제로 우리에게 그 alias로 변환되어서 보여지게 하기 위한 용도
    
    테이블의 alias : 조회 결과에서 보기 위한 게 아니라 SQL 문의 전체 길이를 줄여서 가독성을 높이기 위해 사용한다, 특히 join을 할 때 서로 다른 테이블에 같은 이름의 컬럼이 존재한다면 SQL문 안에서 그 컬럼을 가리킬 때 무슨 테이블의 컬럼인지 더 짧게 표현해주기 위해서도 사용됨
    
- **⚠️ 주의점** : alias를 사용했으면 그 테이블은 그 alias로만 나타내야한다. 다른 절에서 원래의 테이블 이름을 사용하면 에러발생!
    - Response : `Error Code : 1054`